<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>CSV ì¼ê´„ ì˜ˆì¸¡</title>
</head>
<body>
  <h1>ğŸ“‚ CSV íŒŒì¼ë¡œ ì•„ë™ ìœ„í—˜ ì¼ê´„ ì˜ˆì¸¡</h1>

  <form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <label>
      CSV íŒŒì¼ ì—…ë¡œë“œ:
      <input type="file" name="csv_file" accept=".csv" required>
    </label>
    {% if filename %}
      <span style="margin-left: 10px; color: #555;">ğŸ“„ {{ filename }}</span>
    {% endif %}
    <br><br>
    <button type="submit">ì˜ˆì¸¡í•˜ê¸°</button>
  </form>

  {% if results %}
    <h2>
      ğŸ“Š ì˜ˆì¸¡ ê²°ê³¼
      {% if accuracy %}
        <span style="font-size: 0.8em; color: gray;">
          (ì •í™•ë„: {{ accuracy|floatformat:2 }})
        </span>
      {% endif %}
    </h2>

    <table border="1">
      <thead>
        <tr>
          {% for key in results.0.keys %}
            <th>{{ key }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in results %}
          {% comment %} 'ê°€ì •í­ë ¥ ìœ„í—˜'ì¸ ê²½ìš° í–‰ ì „ì²´ì— ìƒ‰ìƒ ì ìš© {% endcomment %}
          {% if row.ì˜ˆì¸¡ê²°ê³¼ == 'ê°€ì •í­ë ¥ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤' %}
            <tr style="background-color: #ffe6ea;">
          {% else %}
            <tr>
          {% endif %}
            {% for value in row.values %}
              <td>{{ value }}</td>
            {% endfor %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endif %}
</body>
</html>